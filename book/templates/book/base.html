{% load static wagtailcore_tags wagtailuserbar %}
<html lang="en">
<head>
    {% block extra_css %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punishment Book</title>
    <meta name="csrf-token" content="{{ csrf_token }}">
    <!--TAB ICON-->
    <link rel="icon" href="{% static 'img/legal.ico' %}" type="image/png">
    <link rel="shortcut icon" href="{% static 'img/legal.ico' %}" type="image/png">

    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <link href="https://cdn.datatables.net/v/bs5/dt-1.13.6/datatables.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">
    <!-- Include DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/dt-1.13.6/datatables.min.css"/>
    <!-- Include DataTables Buttons CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.1.1/css/buttons.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts - Roboto Condensed -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700&display=swap">

    <!--OTHER STYLES -->
    <link rel="stylesheet" href="{% static 'css/datatable.css' %}"></link>
    <link rel="stylesheet" href="{% static 'css/ref_number.css' %}"></link>
    {% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
{% wagtailuserbar %}

{% block content %} {% endblock %}

{% block extra_js %}
    <!-- Jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-3.3.0.min.js"></script>

<!-- Popper js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <!-- Moment.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <!-- Bootstrap Datetimepicker JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>

    <!-- DataTables Responsive Extension JS -->
    <script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>

    <!-- Include DataTables Buttons JS -->
    <script src="https://cdn.datatables.net/buttons/2.1.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.1.1/js/buttons.html5.min.js"></script>

    <!-- other scripts... -->

    <!-- FORM STEP -->
    <script src="{% static 'js/form_step/manage.js' %}"></script>

    <!--UTILS-->
    <script src="{% static 'js/utils/swal_messages.js' %}"></script>

    <!-- REDIRECTS -->
    <script src="{% static 'js/redirects/manage.js' %}"></script>

    <!--TABLE-->
    <script src="{% static 'js/table/load_dt_submitted_violation.js' %}"></script>
    <script src="{% static 'js/table/load_dt_personnel.js' %}"></script>
    <script src="{% static 'js/table/load_dt_violations.js' %}"></script>
    <script src="{% static 'js/table/load_dt_omission.js' %}"></script>
    <script src="{% static 'js/table/load_dt_punishments.js' %}"></script>
    <script src="{% static 'js/table/load_dt_imposed.js' %}"></script>
    <script src="{% static 'js/table/load_dt_resolutions.js' %}"></script>
    <!--PAGES-->
    <script src="{% static 'js/afp_personnel/manage.js' %}"></script>

    <!-- ADDING DATA -->
    <script src="{% static 'js/omission/manage.js' %}"></script>
    <script src="{% static 'js/submission/manage.js' %}"></script>
    <script src="{% static 'js/violations/manage.js' %}"></script>
    <script src="{% static 'js/punishment/manage.js' %}"></script>
    <script src="{% static 'js/imposed/manage.js' %}"></script>

    <!-- MODAL -->
    <script src="{% static 'js/modal/manage.js' %}"></script>

    <script>
        function toggleSidebar() {
            $('#sidebar').toggleClass('active');
        }

        $(document).ready(function() {
            initSubmittedViolationsDT(); // Page

            initializePersonnelDataTable();
            initializeViolationsDT();
            initializeOmissionDataTable();
            initializePunishmentDt();
            initializeImposedDt();
            initializeResolutionsDt();

            function dtp_settings(customOptions = {}) {
                let defaultSettings = {
                    format: 'YYYY-MM-DD HH:mm', // Format of the date and time
                    minDate: moment().subtract(1, 'years'), // One year ago from today
                    maxDate: moment(), // Today
                    defaultDate: moment().subtract(1, 'days'), // Yesterday
                    stepping: 15, // 15 minute intervals
                    sideBySide: true // Show date and time side by side
                };

                // Merge the default settings with any custom options provided
                return {...defaultSettings, ...customOptions};
            }

            $('#dateOmission').datetimepicker(dtp_settings());
            $('#dateResolution').datetimepicker(dtp_settings()); // resolution modal form

            $('#dateOfNotice').datetimepicker(dtp_settings());
        });
    </script>

    <script>
        $(document).ready(function() {
            $(".nav-link").click(function(e) {
                e.preventDefault(); // Prevent the default link behavior

                var linkText = $(this).text().trim();

                switch (linkText) {
                    case 'Records':
                        loadContent('{% url "all_violation_page" %}', '#contentArea');
                        break;
                    case 'Submissions':
                        loadContent('{% url "submission_page" %}', '#contentArea');
                        break;
                    default:
                        console.error('Unknown link');
                }
            });
        });

        function loadContent(url, targetElement) {
            $(targetElement).load(url, function(response, status, xhr) {
                if (status == "error") {
                    var msg = "Sorry, but there was an error: ";
                    $(targetElement).html(msg + xhr.status + " " + xhr.statusText);
                }
            });
        }
    </script>
{% endblock %}

</body>
</html>
